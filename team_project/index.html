<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>planthaus - Cart Demo</title>
  <link rel="stylesheet" href="css/index.css" />
  <style>
    /* --- Cart CSS --- */
    .cart {
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
      padding-right: 1.5em;
      user-select: none;
    }
    .cart p {
      padding-right: 0.5em;
      margin: 0;
    }
    .cart-icon {
      font-size: 1.7rem;
      vertical-align: middle;
    }
    .cart-dropdown {
      display: none;
      position: absolute;
      right: 0;
      top: 100%;
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 1em;
      min-width: 280px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      z-index: 1000;
    }
    .cart:hover .cart-dropdown,
    .cart:focus-within .cart-dropdown {
      display: block;
    }
    #cart-items {
      max-height: 150px;
      overflow-y: auto;
      margin: 0 0 1em 0;
      padding-left: 0;
      list-style: none;
    }
    #cart-items li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: "Urbanist", sans-serif;
      font-size: 0.95rem;
      margin-bottom: 0.5em;
    }
    .delete-btn {
      background: transparent;
      border: none;
      cursor: pointer;
      font-size: 1.3rem;
      color: #a00;
      padding: 0 5px;
    }
    .delete-btn:hover,
    .delete-btn:focus {
      color: #700;
      outline: none;
    }
    .checkout-btn {
      background-color: #3d8b3d;
      color: white;
      border: none;
      border-radius: 4px;
      width: 100%;
      padding: 8px 12px;
      margin-top: 0.5em;
      cursor: pointer;
      font-family: "Urbanist", sans-serif;
      font-weight: 600;
      font-size: 1rem;
    }
    .checkout-btn:hover,
    .checkout-btn:focus {
      background-color: #317031;
      outline: none;
    }
  </style>
</head>
<body>

  <div class="cart" aria-label="Shopping cart" role="region" tabindex="0">
    <p>Cart (<span id="cartCount">0</span>)</p>
    <span class="cart-icon" aria-hidden="true">&#128722;</span>
    
    <div class="cart-dropdown" aria-live="polite" aria-atomic="true">
      <ul id="cart-items"></ul>
      <button class="checkout-btn" onclick="alert('View Cart clicked!')">View Cart</button>
      <button class="checkout-btn" onclick="alert('Checkout clicked!')">Checkout</button>
    </div>
  </div>

  <!-- Example product buttons to test cart -->
  <section>
    <h2>Products</h2>
    <button onclick="addToCart({id:'p1', name:'Monstera deliciosa', price:24.99})">Add Monstera deliciosa</button>
    <button onclick="addToCart({id:'p2', name:'Aloe vera', price:10.99})">Add Aloe vera</button>
    <button onclick="addToCart({id:'p3', name:'Potting soil', price:16.99})">Add Potting soil</button>
  </section>

  <script>
    // cart.js functionality embedded here for demo

    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    function saveCart() {
      localStorage.setItem("cart", JSON.stringify(cart));
    }

    function addToCart(product) {
      const existing = cart.find(item => item.id === product.id);
      if (existing) {
        existing.quantity++;
      } else {
        cart.push({ ...product, quantity: 1 });
      }
      saveCart();
      updateCartCount();
      renderCartItems();
    }

    function removeFromCart(productId) {
      cart = cart.filter(item => item.id !== productId);
      saveCart();
      updateCartCount();
      renderCartItems();
    }

    function getCartCount() {
      return cart.reduce((sum, item) => sum + item.quantity, 0);
    }

    function updateCartCount() {
      const countEl = document.getElementById("cartCount");
      if (countEl) {
        countEl.textContent = getCartCount();
      }
    }

    function renderCartItems() {
      const list = document.getElementById("cart-items");
      list.innerHTML = "";
      if (cart.length === 0) {
        list.innerHTML = "<li>Your cart is empty</li>";
        return;
      }
      cart.forEach(item => {
        const li = document.createElement("li");
        li.textContent = `${item.name} - $${item.price.toFixed(2)} x ${item.quantity}`;
        
        const delBtn = document.createElement("button");
        delBtn.className = "delete-btn";
        delBtn.setAttribute("aria-label", `Remove ${item.name} from cart`);
        delBtn.textContent = "ðŸ—‘ï¸";
        delBtn.onclick = () => removeFromCart(item.id);

        li.appendChild(delBtn);
        list.appendChild(li);
      });
    }

    // Initialize on page load
    document.addEventListener("DOMContentLoaded", () => {
      updateCartCount();
      renderCartItems();
    });
  </script>

</body>
</html>
